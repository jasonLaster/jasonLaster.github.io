<!DOCTYPE html>
<html><head><meta charset="utf-8"/><link rel="stylesheet" href="../../../assets/semantic.min.css"/><link rel="stylesheet" href="../../../assets/codemirror.css"/><link rel="stylesheet" href="../../../assets/flow-highlight-source.css"/><link rel="stylesheet" href="../../../assets/flow-coverage-report.css"/><link rel="stylesheet" href="../../../assets/codemirror-simplescrollbars-addon.css"/><script src="../../../assets/jquery-3.1.0.min.js"></script><script src="../../../assets/semantic.min.js"></script><script src="../../../assets/semantic-tablesort.js"></script><script src="../../../assets/codemirror.js"></script><script src="../../../assets/codemirror-javascript-mode.js"></script><script src="../../../assets/codemirror-annotatescrollbar-addon.js"></script><script src="../../../assets/codemirror-simplescrollbars-addon.js"></script><script src="../../../assets/flow-highlight-source.js"></script></head><body><div class="ui grid container"><div class="row"><h1 class="twelve wide column">Flow Coverage Report - src/utils/isMinified.js</h1><div class="four wide column" style="height:32px;"><a href="../../../index.html" id="link-to-summary">Go back to all files summary.</a></div></div><div class="row"><table class="ui small celled unstackable table"><thead><tr><th class="sorted ascending">Filename</th><th>Percent</th><th>Total</th><th>Covered</th><th>Uncovered</th></tr></thead><tbody><tr class="negative"><td class="">src/utils/isMinified.js</td><td> 76 %</td><td> 85 </td><td> 65 </td><td> 20 </td></tr></tbody></table></div><div class="row red" style="padding:0;height:12px;"></div><div class="row ui one column centered grid"><div class="column" style="text-align:left;"><div class="row"><div class="ui form"><div class="fields"><div class="sixteen wide inline field"><select class="ui search dropdown uncovered-locations"><option value="">Uncovered Locations</option><option value="16">Start: 16,26 - End: 16,34</option><option value="17">Start: 17,31 - End: 17,39</option><option value="20">Start: 20,7 - End: 20,10</option><option value="20">Start: 20,14 - End: 20,31</option><option value="21">Start: 21,8 - End: 21,11</option><option value="32">Start: 32,3 - End: 32,58</option><option value="32">Start: 32,10 - End: 32,13</option><option value="32">Start: 32,10 - End: 32,58</option><option value="35">Start: 35,5 - End: 35,53</option><option value="35">Start: 35,20 - End: 35,23</option><option value="35">Start: 35,20 - End: 35,53</option><option value="36">Start: 36,9 - End: 36,20</option><option value="39">Start: 39,21 - End: 39,24</option><option value="39">Start: 39,21 - End: 39,60</option><option value="39">Start: 39,48 - End: 39,59</option><option value="43">Start: 43,9 - End: 43,20</option><option value="47">Start: 47,5 - End: 47,37</option><option value="47">Start: 47,22 - End: 47,33</option><option value="47">Start: 47,22 - End: 47,37</option><option value="53">Start: 53,22 - End: 53,30</option></select></div><div class="four wide inline field"><select class="ui search dropdown syntax-highlighting"><option value="es">ES6/ES7</option><option value="js">JavaScript</option><option value="no">None</option></select></div></div></div></div><textarea id="file-content" readonly="">/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at &lt;http://mozilla.org/MPL/2.0/&gt;. */

// @flow

import type { SourceRecord } from &quot;../types&quot;;

// Used to detect minification for automatic pretty printing
const SAMPLE_SIZE = 50;
const INDENT_COUNT_THRESHOLD = 5;
const CHARACTER_LIMIT = 250;
const _minifiedCache = new Map();

export function isMinified(source: SourceRecord) {
  if (_minifiedCache.has(source.id)) {
    return _minifiedCache.get(source.id);
  }

  let text = source.get(&quot;text&quot;);
  if (!text) {
    return false;
  }

  let lineEndIndex = 0;
  let lineStartIndex = 0;
  let lines = 0;
  let indentCount = 0;
  let overCharLimit = false;

  // Strip comments.
  text = text.replace(/\/\*[\S\s]*?\*\/|\/\/(.+|\n)/g, &quot;&quot;);

  while (lines++ &lt; SAMPLE_SIZE) {
    lineEndIndex = text.indexOf(&quot;\n&quot;, lineStartIndex);
    if (lineEndIndex == -1) {
      break;
    }
    if (/^\s+/.test(text.slice(lineStartIndex, lineEndIndex))) {
      indentCount++;
    }
    // For files with no indents but are not minified.
    if (lineEndIndex - lineStartIndex &gt; CHARACTER_LIMIT) {
      overCharLimit = true;
      break;
    }
    lineStartIndex = lineEndIndex + 1;
  }

  const minified =
    indentCount / lines * 100 &lt; INDENT_COUNT_THRESHOLD || overCharLimit;

  _minifiedCache.set(source.id, minified);
  return minified;
}
</textarea></div></div><div class="row centered"><footer>Flow Coverage Report generated by<a href="https://flowtype.org"> flow </a>and<a href="https://github.com/rpl/flow-coverage-report"> flow-coverage-report </a>at Tue Apr 03 2018 15:58:53 GMT-0400 (EDT)</footer></div></div><pre id="file-coverage-data" style="display:none;">{&quot;expressions&quot;:{&quot;covered_count&quot;:65,&quot;uncovered_count&quot;:20,&quot;uncovered_locs&quot;:[{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:16,&quot;column&quot;:26,&quot;offset&quot;:524},&quot;end&quot;:{&quot;line&quot;:16,&quot;column&quot;:34,&quot;offset&quot;:533}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:17,&quot;column&quot;:31,&quot;offset&quot;:568},&quot;end&quot;:{&quot;line&quot;:17,&quot;column&quot;:39,&quot;offset&quot;:577}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:20,&quot;column&quot;:7,&quot;offset&quot;:591},&quot;end&quot;:{&quot;line&quot;:20,&quot;column&quot;:10,&quot;offset&quot;:595}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:20,&quot;column&quot;:14,&quot;offset&quot;:598},&quot;end&quot;:{&quot;line&quot;:20,&quot;column&quot;:31,&quot;offset&quot;:616}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:21,&quot;column&quot;:8,&quot;offset&quot;:625},&quot;end&quot;:{&quot;line&quot;:21,&quot;column&quot;:11,&quot;offset&quot;:629}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:32,&quot;column&quot;:3,&quot;offset&quot;:799},&quot;end&quot;:{&quot;line&quot;:32,&quot;column&quot;:58,&quot;offset&quot;:855}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:32,&quot;column&quot;:10,&quot;offset&quot;:806},&quot;end&quot;:{&quot;line&quot;:32,&quot;column&quot;:13,&quot;offset&quot;:810}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:32,&quot;column&quot;:10,&quot;offset&quot;:806},&quot;end&quot;:{&quot;line&quot;:32,&quot;column&quot;:58,&quot;offset&quot;:855}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:35,&quot;column&quot;:5,&quot;offset&quot;:896},&quot;end&quot;:{&quot;line&quot;:35,&quot;column&quot;:53,&quot;offset&quot;:945}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:35,&quot;column&quot;:20,&quot;offset&quot;:911},&quot;end&quot;:{&quot;line&quot;:35,&quot;column&quot;:23,&quot;offset&quot;:915}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:35,&quot;column&quot;:20,&quot;offset&quot;:911},&quot;end&quot;:{&quot;line&quot;:35,&quot;column&quot;:53,&quot;offset&quot;:945}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:36,&quot;column&quot;:9,&quot;offset&quot;:955},&quot;end&quot;:{&quot;line&quot;:36,&quot;column&quot;:20,&quot;offset&quot;:967}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:39,&quot;column&quot;:21,&quot;offset&quot;:1016},&quot;end&quot;:{&quot;line&quot;:39,&quot;column&quot;:24,&quot;offset&quot;:1020}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:39,&quot;column&quot;:21,&quot;offset&quot;:1016},&quot;end&quot;:{&quot;line&quot;:39,&quot;column&quot;:60,&quot;offset&quot;:1056}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:39,&quot;column&quot;:48,&quot;offset&quot;:1043},&quot;end&quot;:{&quot;line&quot;:39,&quot;column&quot;:59,&quot;offset&quot;:1055}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:43,&quot;column&quot;:9,&quot;offset&quot;:1151},&quot;end&quot;:{&quot;line&quot;:43,&quot;column&quot;:20,&quot;offset&quot;:1163}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:47,&quot;column&quot;:5,&quot;offset&quot;:1253},&quot;end&quot;:{&quot;line&quot;:47,&quot;column&quot;:37,&quot;offset&quot;:1286}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:47,&quot;column&quot;:22,&quot;offset&quot;:1270},&quot;end&quot;:{&quot;line&quot;:47,&quot;column&quot;:33,&quot;offset&quot;:1282}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:47,&quot;column&quot;:22,&quot;offset&quot;:1270},&quot;end&quot;:{&quot;line&quot;:47,&quot;column&quot;:37,&quot;offset&quot;:1286}},{&quot;source&quot;:&quot;/Users/jlaster/src/mozilla/debugger.html/src/utils/isMinified.js&quot;,&quot;type&quot;:&quot;SourceFile&quot;,&quot;start&quot;:{&quot;line&quot;:53,&quot;column&quot;:22,&quot;offset&quot;:1407},&quot;end&quot;:{&quot;line&quot;:53,&quot;column&quot;:30,&quot;offset&quot;:1416}}]},&quot;percent&quot;:76}</pre></body></html>